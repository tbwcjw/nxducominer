<p align="center">
<img width="15%" src="assets/Switch_Miner.png">
</p>
    <h2 align="center">nxducominer</h2>
<p align="center">
    A multithreaded <a href='https://duinocoin.com'>DUCO</a> Miner for the Nintendo Switch.
</p>
<p align="center">
    <img src="https://github.com/tbwcjw/nxducominer/actions/workflows/c.yml/badge.svg?event=push">
    <img alt="HB App Store" src="https://img.shields.io/badge/dynamic/json?url=https%3A%2F%2Fraw.githubusercontent.com%2Ffortheusers%2Fswitch-hbas-repo%2Frefs%2Fheads%2Fmain%2Fpackages%2FNXDucoMiner%2Fpkgbuild.json&query=%24.info.version&logo=data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAACUAAAAlCAYAAADFniADAAABbmlDQ1BpY2MAACjPlZE9S8NQFIafVsVvHCwiItKhioMVURBHrYNLEakVrLokMW2FtA1JixRXwcVBcBBd%2FBr8B7oKrgqCoAgiTv4AvxaReK4VWkQHb7g5D%2B%2B97%2BHkDfijlpFxqwcgk807sYlIcDYxF6x9pJ4AbXTRrxmuPTY1FeXP9XaNT9WrsOrF%2F1bjouka4KsTHjZsJy88KhxdztuK14UDRlpbFN4T7nNkQOFzpeslflCcKvGLYiceGwe%2F6hlMVbBewUbayQj3CocyVsH4nkd9SZOZnZmW2iG7E5cYE0QIolNgCYs8YalZyex338CXb5KceAx52xRxxJEiLd4%2BUQvS1ZSaFN2Ux6Kocv%2BZp5scGix1b4pAzb3nPXdD7SZ8bHje%2B77nfRxA1R2cZsv%2BnOQ08ir6RlkL7ULLKhyflTV9C07WoP3W1hztS6qS7U8m4ekImhPQegkN86Wsvs85vIH4ivyiC9jegR6537LwCSCJaBmifg7mAAAACXBIWXMAAAsRAAALEQF%2FZF%2BRAAABh2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSfvu78nIGlkPSdXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQnPz4NCjx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iPjxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI%2BPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9InV1aWQ6ZmFmNWJkZDUtYmEzZC0xMWRhLWFkMzEtZDMzZDc1MTgyZjFiIiB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI%2BPHRpZmY6T3JpZW50YXRpb24%2BMTwvdGlmZjpPcmllbnRhdGlvbj48L3JkZjpEZXNjcmlwdGlvbj48L3JkZjpSREY%2BPC94OnhtcG1ldGE%2BDQo8P3hwYWNrZXQgZW5kPSd3Jz8%2BLJSYCwAACJBJREFUWEelmHlsXNUVh7%2F73puxPavtcZzYxmQzARMnDovYIkJZypLQliIIXYgqaBtDEsIillalQNOERSpCKqWhStip1CKgFaUUSIgCbaq0QIGGpFmchCy2g9eZNzO2Z95y%2B8fcGY%2Bfx47T%2FiRb897ce8835%2FzuzD1P8P9rATAPqALiwC7gI%2B%2BgE5Hw3jgBnQH8EDhTXduAodb8DPgN8LFnzqSke29MQlOAVcDtQB0QDzQ2ypnTpxuW35%2FJmKYJnARcqd7fC6S9i0ykE8mUBlwHLAOmAv3U1oqbFy5sXC716fWuKO%2Bpr8tu7D12aP3W9w7T2%2BcA1UA38BLwKuB6Fy2lyWbqbOAh4FpAYhjmwosumvLk%2FDNbVnb3N9bvP%2BgzHFfUYRhXBMM1FyxYUHM0Esoc%2BuJgD1ABXKzW6AS6vIt7dbxM1QI%2FABar63j9%2FPnhe1rmzV7an6yvPXJUJF0HWwhEZRVMrUe3bCKaTm9NFb8j2%2FHY9r%2Fu79q1OwVEAQm8CTwD9HpiFTQelAYsBW5UHuoX06bpyy9YePIKacyce%2BiwfzCdZtjvy412HAXVAI4DSModl0AgwM7qaObJ%2Fq6DG7ZsOkzfgAvEVLZeAF73BmYcqHNVdlqBJD4jc%2BGiRbX3Ta1vuuRIV5TuHtKGAVpuqsQD5eagAIQLQVciqyt5L%2BiPP7pnR%2Fu2rVu7kVQAIfXVsQH4pBigGKpM7ahrAAcw61tbw%2FfOnTfrhr5EQ%2BzIUUwpcY0SNnQcqKyCaQ0Ix1E3ZWF53XGJ6jrdU6rlb91Mx2Pb3t%2Ffs2dvGqhU5n8NeAqwKDK6AawBvgn0ifppzorLr5z5RHXt3CXtX1TR00PKMEDX8hgFCQApobwCEYrkXuczpcZITWNISgJmUiySWuSrzS112RmNfHqss5fhYQtYqPz7PkVQlwJtQPe5559fveHMc1qXd3zZEPvisJFEYhs6QkUoVe8CVDACcpxdL8DRNDKWTUMiZSyOVE8556yzYnukkzrW2dmn7LILOJyHWgqcUj1rFm%2FMmn32%2BR99HDQth4zPQCgaof5yOSjEyUlKRHkFhMM5wJHKjVJ%2BpawmcAeHaO2Nly%2BYMyf2ypedXZlk0gBSwLZ8PcKAXRMKlW34yk3%2BD5ovIDpsUmZlcIUosX4ObQSwGPU4EkAmi5NOMXxGKzO%2B8%2B3yupqaCuWnStTWR3lKBhxL%2FK3lPLns7o3c%2F701DISriZl9aK5bCDsCmPdOEVDRpfRwCgDHRcYTaFVRfHesQv%2F5%2FdhzT8PvukIZ3o8XyvAZomooJcqsDC9e%2FC2u%2B%2FHLvHDZMvx2luigiUSWzonwWnts%2BWQqjWbb%2BK%2F5Or7HH0FbcgUyk0UMDaHphR2tFf4V7mi6EEJDdx1iZh%2FxYJSfLPspN979DNuaz6M6NUBFdgiZdz14oo8gCwkCAVkLkTDxzWvBt%2B4htFXLkaEQxBPgumPpvVAgkPkxQlBuZYglB%2FhkVis33fE0d9%2F8KF3VddSYfRiOg8xPL0xSUyEXMB5Hj0Twr16BvvYBaD4VEibCsgowUkpct7BjJWOhcvLusMhQkkBmiN9feC3X%2F%2Bhlfr2kDYGgKh1HjCqcCpQeRMtmMb62BN8vHkZcfRVkspAeLFq5IOm4rlSTbcaDyqvYypp0iSUHGCwrZ%2B0N97D03ufZtOASoimTQGYwV9JsFswkxtxmfOsexFh9KyISKSrVaAmR2xFyBMplfKiSdkYK8NsWNWY%2Fe09qom3lL7ntlsc5NHUGkb4eRDSKf9Ut%2BNY9iGg5HWmaSCuronvso15LKC4feKEksrCXS2ONKDQ8SHgoyRvnXMU1dz3La9%2B%2Fj8qH70f%2FxmKwrNGlGutlJYGUEun5%2FhgN5TjSlflMHl8aklhqgERZgO2Ll6JPiSHjJrJEqUYp74lcJOmO4ykbEJbtSFdhTw4LpBD4bJtAysxlaLyJoij9YnSAos8wFsq27UImJ5%2Bv3MBJjVXGHnUtBEIUbgqKoLKAkHbG9emasDVjZOIkVMK%2F4yj%2FiXO%2FDYZhgEBkMpl8DoYogjoClHUc6UjX7NzcPTVUTtYfGLf1mHATTPimQhaCcDCE0HVe%2FePrXZ2dnWl1yOyi6DzVD1yVcVy9e9vbx%2BaLuBub3hRORBv0rO2ge85I3mxkXJgfFlxWo5GdCEpK%2FP4yKiJh9rbvtR5Y87P9a9et3SelrABM4AkgmYdKqO7ikrTt6js%2F2t4R%2FvTtvuZYwK83zgkN%2BKNgZ8f7UhsFZbljocn9rhKMRkkmEzz34vNdbStX7Ni8eXOXOjZJdfL9HE%2Fftw%2FYAZwKzOjsHUi1v%2Fdmx%2Bzez9MzTz4pODS1qSwldTTXGgOXcaE1LLg0pmGpM96IBMFgEJ%2Ffx5atW8zb7rx916%2Beeqo9kUigOpvdwAPAP%2FMzvF1AB%2FCWMlyLDVXt7e09yS2vHJtrpGXVyadE4tF6LVdSB3LnAIbzUCpTeZX5y6gIh9i3b6%2B15pF1B1bfeceuA%2Fv3JxVMGtgIPOJtUL1QqE7mU%2BAD1XafnsjY7Pzw712V%2F36nr7km7Nca54TivijYFgI5kikFpWs6wUiURDzO8y%2B90Nm24tbPN23a1CldNwgEgLeBB4FtpVr5UlB5JYAtqqxNwPSOnn7zwOY3Omf37UrNaKgPDU%2Bb7U9Jg6xlcXoQLq%2FV8QdC6LrOO5veia%2B8a%2FXO9evXHygq1R6VmZeBpDfgiaoCuBl4F9gOvDU97N98%2Fcp72q%2F%2Bw26raYstnz7oSildueNfnw23LW%2FbjeBd4C%2FAP4A%2Fq25btdQTq9RGmUgz1DOpi9VBP9V62imVc5Z8t%2F6KeU2BA%2F%2FZkdr43HNHu7u7888OUGDPen0zkU4UKq9FCu401RYN539ElGcqlC83AB96Jx9P%2FysUQDlwvXoiU6f86QCH1IOLP5Uy8WT0%2F0DlpQMNQFBl7Yh3wInqvzgpfP1Os%2FhJAAAAAElFTkSuQmCC&label=HB%20App%20Store">

</p>
<hr>
<h4>Setup</h4>
<ul>
    <li>Unzip <code>[release].zip</code>, copy <code>switch/</code> to the root of your SD card.</li>
    <li>Set <code>config.txt</code>, explained <a href='#config'>below</a>.
    <li>Launch the miner from HB menu.</li>
</ul>
<table id="config">
    <thead>
        <tr>
            <th>Key</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>node</code></td>
            <td><code>str</code><br><code>none</code></td>
            <td>The IP address of the node to connect to. Can be found manually <a href='https://server.duinocoin.com/getPool'>here</a>. If left empty the application will use <a href='https://server.duinocoin.com/getPool'>https://server.duinocoin.com/getPool</a> to find one.
        </tr>
        <tr>
            <td><code>port</code></td>
            <td><code>int</code><br><code>none</code></td>
            <td>The port of the node. If this is left blank, the application will find a node using the method above. Regardless if the <code>node</code> is set.</td>
        </tr>
        <tr>
            <td><code>wallet_address</code></td>
            <td><code>str</code></td>
            <td>The address/username of your duinocoin wallet.
        </tr>
        <tr>
            <td><code>miner_key</code></td>
            <td><code>str</code><br><code>none</code></td>
            <td>As specified in <code>Wallet > Settings > Miner Key</code>. Leave blank if not applicable.</td>
        </tr>
        <tr>
            <td><code>difficulty</code></td>
            <td><code>str</code></td>
            <td>The starting difficulty. The node will automatically negotiate the difficulty. Valid starting difficulties are <code>LOW</code> <code>MEDIUM</code> <code>NET</code> and <code>EXTREME</code>. <b><code>LOW</code> is recommended for this application.</b> <CODE>EXTREME</code> is not used anywhere officially. More information on difficulties can be found <a href='https://github.com/revoxhere/duino-coin/tree/useful-tools?tab=readme-ov-file#duco-s1-mining'>here</a>.</td> 
        </tr>
        <tr>
            <td><code>rig_id</code></td>
            <td><code>str</code></td>
            <td>A friendly name for your miner which displays in the wallet.</td>
        </tr>
        <tr>
            <td><code>cpu_boost</code></td>
            <td><code>bool</bool></td>
            <td>Either <code>true</code> or <code>false</code>.<Br>Using <a href='https://switchbrew.github.io/libnx/apm_8h.html#a5690c3a786c3bee6ef93f5db5354e080'>ApmCpuBoostMode</a> with mode <code>ApmCpuBoostMode_FastLoad</code>.</td>
        </tr>
        <tr>
            <td><code>iot</code></td>
            <td><code>bool</code><br></td>
            <td>Either <code>true</code> or <code>false</code>. Upload IoT data to your wallet (Temperature, Battery charge).</td>
        </tr>
        <tr>
            <td><code>threads</code></td>
            <td><code>int</code><br></td>
            <td>Number of threads to mine on. Between 1 and 6.</td>
        </tr>
        <tr>
            <td><code>web_dashboard</code></td>
            <td><code>bool</code><br></td>
            <td>Either <code>true</code> or <code>false</code>. The web dashboard will run on port 8080 of the switch's IP address.</td>
        </tr>
    </tbody>
</table>
<hr>
<h4>Building</h4>
<ul>
    <li>Install <a href='https://devkitpro.org'>devkitpro</a> with <code>switch-dev</code>, <code>switch-curl</code> and <code>switch-zlib</code> using the <a href='https://devkitpro.org/wiki/Getting_Started'>Getting Started</a> guide. For building releases you will need <code>zip</code>.
    <li>Clone <a href='https://github.com/tbwcjw/nxducominer.git'>https://github.com/tbwcjw/nxducominer.git</a>.
    <li>Copy <code>config.sample.txt</code> to <code>config.txt</code> and fill in the fields<sup><a href='#config'>*</a></sup>.
    <li>
        <code>make (all)</code> - build the application and generate a release.
        <br>
        <code>make build</code> - build the application.
        <br>
        <code>make release</code> - builds and generate a release.
        <br>
        <code>make clean</code> - removes build/build data. does not remove releases
    </li>
    <li>Use NXLink to send <code>application.nro</code> and fptd to send the <code>config.txt</code>, ensuring it is in the same directory as <code>application.nro</code>.</li>
</ul>
<hr>
<h4>Roadmap</h4>
<table>
    <thead>
        <tr>
            <th>Short term</th>
            <th>Mid term</th>
            <th>Long term</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>
                <li><s>Automatically select node.</s></li>
                <li>Better error handling.</li>
                <li><s>Reconnect to node if connection lost.</s></li>
                <li><s>Handle <code>consoleExit()</code> without error.</s></li>
                <li><s>Prevent switch from auto-sleeping in app.</s></li>
            </td>
            <td>
                <li><s>Web dashboard, like the ESP32 miner</s></li>
                <li><s>Multithreading.</s></li>
            </td>
            <td>
                <li>Pretty GUI.</li>
            </td>
        </tr>
    </tbody>
</table>
<hr>
<h4>Benchmarking Results</h4>
<table>
    <thead>
        <tr>
            <th>Device/Version</th>
            <th>App version</th>
            <th>CFLAGS</th>
            <th>CPU Boost</th>
            <th>Threads</th>
            <th>Node (address:port)</th>
            <th>Shares /1hr</th>
            <th>Avg. Hashrate (estimated)</th>
            <th>Avg. Difficulty</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>HAC-001</code><code>18.0.1|AMS 1.8.0|E</code></td>
            <td><code>25.05.13_00.27</code></td>
            <td><code>N/A</code> (Release)</td>
            <td><code>true</code></td>
            <td>3</td>
            <td>152.53.38.31:7070</td>
            <td>1212</td>
            <td>583.24 kH/s</td>
            <td>32000</td>
        </tr>
    </tbody>
</table>
<hr>
<h4>Benchmarking</h4>
Use <a href='https://github.com/tbwcjw/nxducominer/blob/main/tools/benchmark_dirty.py'>benchmark_dirty.py</a> for official benchmarking. Submit results by opening an issue. Benchmarks should at least be one hour long.
<table>
    <thead>
        <tr>
            <th>Argument</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>-d</code><br><code>--duration</code></td>
            <td>Duration to run the benchmark. (e.g., 10m, 1h, 30s).
            <br>
            <i>Default: <code>1h</code></i></td>
        </tr>
        <tr>
            <td><code>--nx</code></td>
            <td>Path to nxlink/nxlink.exe.</td>
        </tr>
        <tr>
            <td><code>-ip</code></td>
            <td>Switch IP.</td>
        </tr>
        <tr>
            <td><code>--nro</code></td>
            <td>Path to application.nro.</td>
        </tr>
        <tr>
            <td><code>-o</code><br><code>--output</code></td>
            <td>Path to benchmark results.
            <br>
            <i>Default: <code>nxducominer_benchmark.txt</code></i></<td>
        </tr>
        <tr>
            <td><code>-og</code><br><code>--output-graph</code></td>
            <td>Path to benchmark result graph.
            <br>
            <i>Default: <code>nxducominer_benchmark_graph.png</code></i></td>
        </tr>
    </tbody>
</table>

<hr>
<h4>Screenshots</h4>
<p align="center">
<img src="assets/nxducominer_screenshot_multithreaded.png"><br>
<i>Application</i>
<img src="assets/nxducominer_screenshot_dashboard.png"><br>
<i>Web dashboard</i>
</p>
<hr>
<h4>Credits</h4>
JSON Parser: <a href='https://github.com/zserge/jsmn'>zserge/jsmn</a>, MIT License.
<hr>
<h4>Licenses</h4>
<a href='https://www.gnu.org/licenses/gpl-3.0.en.html'><img src='https://camo.githubusercontent.com/7710eaa5373ee99658cc5c6e389bb88119903cbf92422f24c1e92cd957793e8c/68747470733a2f2f7777772e676e752e6f72672f67726170686963732f67706c76332d3132377835312e706e67'></a><br>
nxducominer is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.
